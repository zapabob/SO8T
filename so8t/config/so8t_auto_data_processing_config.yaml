# SO8T全自動データ処理パイプライン設定ファイル

# 基本設定
input_dir: "D:/webdataset/processed"
output_dir: "D:/webdataset/processed/four_class"
checkpoint_dir: "D:/webdataset/checkpoints/data_processing"
session_id_format: "%Y%m%d_%H%M%S"

# SO8T設定
so8t:
  enabled: true  # SO8T分類を使用するか
  model_path: null  # nullの場合は自動検出

# フォールバック分類設定
fallback_classification:
  enabled: true  # フォールバック分類を有効にするか
  use_rules: true  # ルールベース分類を使用するか

# NSFWラベル詳細化設定
nsfw_refinement:
  enabled: true  # NSFWラベル詳細化を有効にするか
  refine_nsfw_detected: true  # nsfw_detectedを詳細化するか

# キーワード分析設定
keyword_analysis:
  enabled: true  # キーワード分析を有効にするか
  check_dangerous_keywords: true  # 危険キーワードをチェックするか
  check_confidential_keywords: true  # 機密キーワードをチェックするか
  check_illegal_keywords: true  # 違法キーワードをチェックするか

# ドメイン信頼度スコア設定
domain_trust:
  enabled: true  # ドメイン信頼度スコアを有効にするか
  low_trust_threshold: 0.5  # 信頼度がこの値未満の場合はESCALATION
  trusted_domains:  # 信頼できるドメインリスト
    - wikipedia.org
    - edu
    - gov
    - ac.jp
    - go.jp
  untrusted_domains:  # 信頼度が低いドメインリスト
    - blog
    - forum
    - social
    - anonymous
    - tor

# ハイブリッド分類設定
hybrid_classification:
  enabled: true  # ハイブリッド分類を有効にするか
  so8t_high_confidence_threshold: 0.7  # SO8T分類を優先する信頼度閾値
  so8t_medium_confidence_threshold: 0.4  # ハイブリッド分類を使用する信頼度閾値
  availability_check_interval: 300  # SO8Tモデル利用可能性チェック間隔（秒）

# データクリーニング設定
data_cleaning:
  enabled: true  # データクリーニングを有効にするか
  exclude_empty_text: true  # テキスト長が0のサンプルを除外するか
  fill_missing_from_content: true  # テキストフィールドが欠損している場合、contentフィールドから補完を試みるか

# カテゴリ詳細化設定
category_refinement:
  enabled: true  # カテゴリ詳細化を有効にするか
  refine_general_category: true  # generalカテゴリを詳細化するか
  confidence_threshold: 0.3  # カテゴリ詳細化の信頼度閾値

# ESCALATION分類設定
escalation_classification:
  enabled: true  # ESCALATION分類を有効にするか
  long_text_threshold: 1000  # 長文サンプルの閾値（文字数）

# データバリデーション設定
data_validation:
  enabled: true  # データバリデーションを有効にするか
  check_required_fields: true  # 必須フィールドをチェックするか
  check_text_length: true  # テキスト長をチェックするか
  max_text_length: 1000000  # 最大テキスト長（文字数）

# 処理設定
processing:
  num_workers: 4  # 並列処理ワーカー数
  batch_size: 100  # バッチサイズ
  quality_threshold: 0.7  # 品質閾値（0.0-1.0）

# チェックポイント設定
checkpoint:
  enabled: true  # チェックポイントを有効にするか
  interval_seconds: 300  # チェックポイント保存間隔（秒、5分）

# ログ設定
logging:
  level: "INFO"
  log_file: "logs/so8t_auto_data_processing_pipeline.log"
  max_log_size_mb: 100

