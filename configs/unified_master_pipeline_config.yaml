# 統合マスターパイプライン設定ファイル

# 基本設定
session_id_format: "%Y%m%d_%H%M%S"
checkpoint_dir: "D:/webdataset/checkpoints/unified_master_pipeline"

# Phase 1: 並列DeepResearch Webスクレイピング
phase1_parallel_scraping:
  enabled: true
  required: true  # 必須フェーズ
  num_instances: 10
  base_output: "D:/webdataset/processed"
  base_port: 9222
  restart_delay: 60.0
  max_memory_gb: 8.0
  max_cpu_percent: 80.0

# Phase 2: SO8T全自動データ処理
phase2_data_processing:
  enabled: true
  required: true  # 必須フェーズ
  config: "configs/so8t_auto_data_processing_config.yaml"
  timeout: 86400  # 24時間タイムアウト

# Phase 3: SO8T完全統合A/Bテスト
phase3_ab_test:
  enabled: true
  required: false  # オプションフェーズ（時間がかかるため）
  config: "configs/complete_so8t_ab_test_pipeline_config.yaml"
  timeout: 172800  # 48時間タイムアウト

# Phase 4: GitHubリポジトリ検索
phase4_github_scraping:
  enabled: true
  required: false  # オプションフェーズ
  output_dir: "D:/webdataset/processed/github"
  github_token: null  # GitHub APIトークン（オプション）
  queries:
    - "best practices"
    - "tutorial"
    - "example"
    - "documentation"
  languages: null  # プログラミング言語（オプション、例: ["Python", "JavaScript"]）
  max_repos: 100
  min_stars: 100
  timeout: 3600  # 1時間タイムアウト

# Phase 5: エンジニア向けサイトスクレイピング
phase5_engineer_sites:
  enabled: true
  required: false  # オプションフェーズ
  output_dir: "D:/webdataset/processed/engineer_sites"
  queries:
    - "Python"
    - "JavaScript"
    - "programming"
    - "coding"
  delay: 2.0  # リクエスト間の遅延（秒）
  max_articles: 100  # サイトあたりの最大記事数
  timeout: 7200  # 2時間タイムアウト

# Phase 6: コーディング関連データ抽出
phase6_coding_extraction:
  enabled: true
  required: false  # オプションフェーズ
  input_dir: "D:/webdataset/processed/four_class"
  output_dir: "D:/webdataset/coding_dataset"
  min_code_length: 10  # 最小コード長
  min_text_length: 50  # 最小テキスト長
  timeout: 3600  # 1時間タイムアウト

# Phase 7: コーディングタスク用データセット作成
phase7_coding_training_data:
  enabled: true
  required: false  # オプションフェーズ
  input_dir: "D:/webdataset/coding_dataset"
  output_dir: "D:/webdataset/coding_training_data"
  timeout: 3600  # 1時間タイムアウト

# Phase 8: コーディング特化再学習
phase8_coding_retraining:
  enabled: true
  required: false  # オプションフェーズ（時間がかかるため）
  config_path: "configs/coding_focused_retraining_config.yaml"
  timeout: 86400  # 24時間タイムアウト

# Phase 9: ドキュメンテーション収集
phase9_documentation_scraping:
  enabled: true
  required: false  # オプションフェーズ
  output_dir: "D:/webdataset/processed/documentation"
  github_repos: []  # GitHubリポジトリURLのリスト（オプション）
  api_urls: []  # APIドキュメンテーションURLのリスト（オプション）
  blog_urls: []  # 技術ブログURLのリスト（オプション）
  delay: 2.0  # リクエスト間の遅延（秒）
  max_docs: 100  # ソースあたりの最大ドキュメント数
  timeout: 7200  # 2時間タイムアウト

# Phase 10: 統合AIエージェント基盤の構築
phase10_unified_agent_base:
  enabled: true
  required: false  # オプションフェーズ
  model_path: null  # SO8Tモデルのパス（nullの場合はデフォルト）
  knowledge_base_path: "database/so8t_memory.db"  # 知識ベースのパス
  rag_store_path: "D:/webdataset/vector_stores"  # RAGストアのパス
  coding_data_path: "D:/webdataset/processed/coding"  # コーディングデータのパス
  science_data_path: "D:/webdataset/processed/science"  # 科学データのパス
  test_queries:  # テストクエリのリスト（オプション）
    - "Pythonでリストをソートする方法"
    - "機械学習の基本的な概念について説明してください"
    - "SO8Tモデルの特徴を教えてください"
  timeout: 3600  # 1時間タイムアウト

# Phase 11: 検知用NSFWデータセット収集（拡張版）
phase11_nsfw_detection_dataset:
  enabled: true
  required: false  # オプションフェーズ
  input_dir: "D:/webdataset/processed/four_class"  # 入力ディレクトリ（処理済みデータ）
  output_dir: "D:/webdataset/nsfw_detection_dataset"  # 出力ディレクトリ
  nsfw_classifier_path: null  # NSFW分類器のパス（nullの場合はデフォルト）
  max_samples: 50000  # 最大収集サンプル数（拡張）
  use_multimodal: true  # マルチモーダル検知を使用するか
  include_synthetic: true  # 合成データを含めるか
  synthetic_samples: 1000  # 合成サンプル数
  include_metadata: true  # 詳細メタデータを含めるか
  
  # 詳細カテゴリ設定
  detailed_categories:
    enabled: true
    total_categories: 23  # 詳細カテゴリ数
  
  # データソース設定
  data_sources:
    existing_data: true  # 既存データから収集
    synthetic_data: true  # 合成データ生成
  
  timeout: 14400  # 4時間タイムアウト（拡張）

# 評価設定
evaluation:
  coding_capability:
    enabled: true
    test_data_dir: "D:/webdataset/coding_training_data"
    output_dir: "D:/webdataset/evaluation/coding_capability"
    model_name: "so8t_coding_model"

# タスクスケジューラ設定
task_scheduler:
  task_name: "SO8T-UnifiedMasterPipeline-AutoStart"
  trigger: "onstart"  # システム起動時
  priority: "highest"

