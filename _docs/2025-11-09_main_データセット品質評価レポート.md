# データセット品質評価レポート

## 評価日時
- **日付**: 2025-11-09
- **データセット**: `four_class_reclassified_20251109_095554.jsonl`
- **総サンプル数**: 604

## 分類分布

### 四値分類結果
- **ALLOW**: 306 (50.7%)
- **DENY**: 104 (17.2%)
- **REFUSE**: 194 (32.1%)
- **ESCALATION**: 0 (0.0%)
- **unknown**: 0 (0.0%)

### 評価
- ✅ バランス: ALLOWが約50%、DENY/REFUSEが約50%で、適切なバランス
- ✅ 分類完了率: 100%（すべてのサンプルが適切に分類されている）
- ⚠️ ESCALATION: 0件（機密ドメインや長文のサンプルが少ない可能性）

## NSFWラベル分布

- **safe**: 400 (66.2%)
- **nsfw_detected**: 202 (33.4%)
- **unknown**: 2 (0.3%)

### 評価
- ✅ 安全なコンテンツが約66%を占める
- ✅ NSFW検知が約33%で、適切な検知率
- ⚠️ unknownが2件（0.3%）存在

## テキスト品質

### テキスト長統計
- **最小**: 0文字
- **最大**: 274,466文字
- **平均**: 23,540.3文字
- **中央値**: 528文字

### 評価
- ⚠️ **問題点**: テキスト長が0のサンプルが存在（171件のtextフィールド欠損）
- ✅ 中央値が528文字で、適切な長さのサンプルが多い
- ⚠️ 最大値が274,466文字と非常に長い（Wikipedia記事の可能性）

## カテゴリ分布

### Top 10カテゴリ
1. **general**: 172 (28.5%)
2. **science**: 90 (14.9%)
3. **technology**: 84 (13.9%)
4. **medicine**: 59 (9.8%)
5. **history**: 54 (8.9%)
6. **culture**: 52 (8.6%)
7. **business**: 47 (7.8%)
8. **nsfw_detection**: 45 (7.5%)
9. **news**: 1 (0.2%)

### 評価
- ✅ 多様なカテゴリが含まれている
- ✅ 科学、技術、医療、歴史など、教育価値の高いカテゴリが多い
- ⚠️ generalが28.5%と多い（カテゴリ詳細化の余地あり）

## 言語分布

- **日本語 (ja)**: 339 (56.1%)
- **英語 (en)**: 265 (43.9%)

### 評価
- ✅ 日本語と英語のバランスが良い
- ✅ 多言語データセットとして適切

## ドメイン分布

### ユニークドメイン数
- **総数**: 12ドメイン

### Top 10ドメイン
1. **www.google.com**: 133 (22.0%)
2. **en.wikipedia.org**: 108 (17.9%)
3. **encyclopedia**: 108 (17.9%)
4. **ja.wikipedia.org**: 105 (17.4%)
5. **dictionary**: 63 (10.4%)
6. **www.bing.com**: 28 (4.6%)
7. **arxiv.org**: 12 (2.0%)
8. **scholar.google.com**: 11 (1.8%)
9. **ci.nii.ac.jp**: 10 (1.7%)
10. **github.com**: 10 (1.7%)

### 評価
- ✅ 信頼できるドメインが多い（Wikipedia、arXiv、Google Scholarなど）
- ✅ 学術的なドメインが含まれている
- ⚠️ Google/Bingの検索結果が約27%を占める（スクレイピング元の特性）

## 分類メソッド

- **rule_based**: 604 (100.0%)

### 評価
- ✅ すべてのサンプルがルールベース分類で処理されている
- ℹ️ SO8Tモデルが利用できないため、ルールベース分類のみ使用

## データ品質の問題点

### 1. 欠損データ
- **textフィールド欠損**: 171件 (28.3%)
- **nsfw_label欠損**: 2件 (0.3%)

### 2. データの不整合
- テキスト長が0のサンプルが存在
- 一部のサンプルで必須フィールドが欠損

### 3. 改善の余地
- ESCALATION分類が0件（機密ドメインや長文のサンプルが少ない）
- generalカテゴリが28.5%と多い（カテゴリ詳細化の余地）

## 品質スコア

### 総合評価: **B+ (良好)**

| 評価項目 | スコア | コメント |
|---------|--------|----------|
| 分類バランス | A | ALLOW/DENY/REFUSEのバランスが良い |
| データ完全性 | C+ | テキストフィールド欠損が28.3% |
| カテゴリ多様性 | B+ | 多様なカテゴリが含まれている |
| 言語多様性 | A | 日本語と英語のバランスが良い |
| ドメイン信頼度 | A | 信頼できるドメインが多い |
| 分類精度 | B+ | ルールベース分類で適切に分類 |

## 推奨改善事項

### 1. データクリーニング
- テキストフィールドが欠損しているサンプルの処理
- テキスト長が0のサンプルの除外または補完

### 2. カテゴリ詳細化
- generalカテゴリの詳細化（テキスト内容から推測）
- カテゴリの再分類

### 3. ESCALATION分類の追加
- 機密ドメイン（defense、medical、financial）のサンプル追加
- 長文サンプルの追加

### 4. データバリデーション
- 必須フィールドのチェック
- データ整合性の検証

## まとめ

データセットは全体的に良好な品質を持っていますが、以下の点で改善の余地があります：

1. **強み**:
   - 分類バランスが良い（ALLOW 50.7%、DENY/REFUSE 49.3%）
   - 多様なカテゴリと言語が含まれている
   - 信頼できるドメインが多い

2. **改善点**:
   - テキストフィールド欠損が28.3%（171件）
   - ESCALATION分類が0件
   - generalカテゴリが28.5%と多い

3. **推奨アクション**:
   - 欠損データの処理
   - カテゴリ詳細化の実施
   - ESCALATION分類のサンプル追加

