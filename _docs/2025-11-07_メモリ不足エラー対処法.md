# メモリ不足エラー対処法

## 問題
ページングファイル（仮想メモリ）が小さすぎるため、モデル読み込みに失敗しています。

## 原因
- **ディスク容量不足**: C:ドライブの空き容量が0.33GBしかない
- モデル読み込み時に一時的に大量のメモリ（ページングファイル）が必要
- ページングファイルが拡張できないため、エラー1455が発生

## 解決方法

### 方法1: ディスク容量を確保（推奨）

1. **不要なファイルを削除**
   - 一時ファイル: `%TEMP%` をクリーンアップ
   - ダウンロードフォルダの古いファイル
   - ブラウザのキャッシュ

2. **ディスククリーンアップを実行**
   ```powershell
   cleanmgr /d C:
   ```

3. **少なくとも10GB以上の空き容量を確保**

### 方法2: ページングファイルサイズを手動で増やす

1. **システムのプロパティを開く**
   - Windowsキー + Pause/Break
   - 「システムの詳細設定」→「詳細設定」タブ

2. **パフォーマンス設定**
   - 「設定」→「詳細設定」タブ
   - 「仮想メモリ」→「変更」

3. **ページングファイルサイズを増やす**
   - 「自動的に管理」のチェックを外す
   - 「カスタムサイズ」を選択
   - 初期サイズ: 16384 MB (16GB)
   - 最大サイズ: 32768 MB (32GB)
   - 「設定」→「OK」→再起動

### 方法3: モデルを別のドライブに移動

1. **空き容量のあるドライブにモデルをコピー**
   ```powershell
   # 例: D:ドライブにコピー
   Copy-Item -Path "Borea-Phi-3.5-mini-Instruct-Common" -Destination "D:\models\" -Recurse
   ```

2. **設定ファイルを更新**
   - `configs/finetune_borea_japanese.yaml`の`base_model`パスを変更

### 方法4: より軽量なモデルを使用

- より小さなモデル（例: Phi-3-mini）を使用
- または、モデルを事前にGGUF形式に変換してから使用

## 現在の状況

- **システムメモリ**: 31.87 GB (使用率 72.6%)
- **ディスク容量**: 930.50 GB (空き 0.33 GB) ← **問題**
- **モデルサイズ**: 約7.12 GB (2ファイル)

## 推奨アクション

1. **即座に**: ディスク容量を10GB以上確保
2. **その後**: ページングファイルサイズを16-32GBに設定
3. **再実行**: ファインチューニングスクリプトを再実行

## 注意事項

- ディスク容量が不足している状態では、モデル読み込みは成功しません
- ページングファイルは物理メモリの1.5-2倍程度を推奨
- モデル読み込み時には一時的にモデルサイズの2-3倍のメモリが必要になることがあります









